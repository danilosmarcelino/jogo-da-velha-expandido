<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo da Velha Expandido</title>
    
    <!-- Fontes estilo GTA / Action -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@400;700&family=Russo+One&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body>

    <!-- O ID menu permite rolagem para evitar problemas de zoom -->
    <div id="menu">
        <div class="gta-panel">
            <h1 class="gta-title">JOGO DA VELHA<br><span style="color:#fff">EXPANDIDO</span></h1>
            <p class="gta-subtitle">MULTIPLAYER & IA</p>

            <!-- MODO ONLINE -->
            <div class="menu-section">
                <label>SESSÃO ONLINE</label>
                <input type="text" id="room-name" placeholder="NOME DA GANGUE (SALA)" value="groove_st">
                <button onclick="startGame('online')" class="btn-green">ENTRAR NA SESSÃO</button>
            </div>

            <!-- LISTA DE SALAS -->
            <div id="painel-salas" class="menu-section">
                <label style="display:flex; justify-content:space-between; align-items:center;">
                    SERVIDORES ATIVOS
                    <button onclick="requestRoomList()" class="refresh-btn">↻</button>
                </label>
                <div id="room-list-container">
                    <p style="color: #555; font-size: 14px; text-align: center;">BUSCANDO SINAL...</p>
                </div>
            </div>

            <!-- MODO IA -->
            <div class="menu-section ai-section">
                <label style="color: #f1c40f;">DESAFIE A MÁQUINA</label>
                <input type="text" id="player-nickname-ai" placeholder="SEU VULGO" maxlength="10">
                
                <label class="input-label">NÍVEL DE PROCURADO:</label>
                <select id="ai-level">
                    <option value="easy">⭐ (FÁCIL)</option>
                    <option value="hard">⭐⭐⭐ (DIFÍCIL)</option>
                    <option value="god">⭐⭐⭐⭐⭐ (IMPOSSÍVEL)</option>
                </select>
                
                <label class="input-label">ESCOLHA SEU LADO:</label>
                <select id="player-symbol-choice">
                    <option value="X">X (VOCÊ COMEÇA)</option>
                    <option value="O">O (IA COMEÇA)</option>
                </select>
                <button onclick="startGame('ai')" class="btn-orange">INICIAR MISSÃO</button>
            </div>
        </div>
    </div>

    <!-- PAINEL DE INFORMAÇÕES (HUD) -->
    <div class="info-panel">
        <div class="hud-bar">
            <div class="hud-item">SALA: <span id="room-display" style="color:#3498db">OFFLINE</span></div>
            <div class="hud-item">PLAYER: <span id="my-role" style="color:#fff">...</span></div>
            <div class="hud-item">TURNO: <span id="current-turn" style="color:#f1c40f">X</span></div>
        </div>
        <p id="status-msg">AGUARDANDO INÍCIO...</p>
        <button id="restart-btn" class="hidden btn-red" onclick="location.reload()">ABANDONAR MISSÃO</button>
    </div>

    <!-- TABULEIRO -->
    <div id="game-container"></div>

    <!-- CHAT -->
    <div id="chat-panel" class="menu-section hidden chat-hud">
        <label>MENSAGENS</label>
        <div id="chat-messages"></div>
        <div class="chat-input-area">
            <input type="text" id="chat-input" placeholder="Digitar..." maxlength="100">
            <button id="send-chat-btn">></button>
        </div>
    </div>

    <!-- MODAL FIM DE JOGO (MISSION PASSED / WASTED) -->
    <div id="game-over-modal" class="hidden">
        <div class="modal-content gta-modal">
            <h2 id="end-title">MISSION PASSED</h2>
            <img id="ai-reaction-img" class="hidden cartoon-img" src="" alt="Reação">
            <div id="end-symbol">RESPECT +</div>
            <p id="end-name">Vencedor</p>
            <div class="modal-buttons-container">
                <button onclick="viewBoard()" class="btn-blue">VER MAPA</button>
                <button onclick="location.reload()" class="btn-green">NOVA MISSÃO</button>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>
</html>